---
import { getCollection } from 'astro:content';
import BlogLayout from '../layouts/BlogLayout.astro';

const posts = await getCollection('posts');
const sortedPosts = posts.sort((a, b) => 
  new Date(b.data.pubDate).valueOf() - new Date(a.data.pubDate).valueOf()
);
const featuredPosts = sortedPosts.slice(0, 3);
const recentPosts = sortedPosts.slice(0, 6);
---

<BlogLayout 
  title="Northern Landing - Your Journey to Canada Starts Here"
  description="Welcome to Northern Landing, your comprehensive resource hub for newcomers to Canada. Discover success stories, immigration guides, settlement tips, and community support to help you build your new life in Canada."
>
  <!-- Hero Section -->
  <section class="relative bg-gradient-to-br from-blue-800 via-blue-600 to-indigo-900 text-white py-20">
    <div class="absolute inset-0 bg-black/20"></div>
    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center">
        <h1 class="text-4xl md:text-6xl font-bold mb-6">
          Welcome to <span class="text-red-500">Canada</span>
        </h1>
        <p class="text-xl md:text-2xl mb-8 text-blue-100 max-w-3xl mx-auto">
          Your comprehensive resource hub for immigration, settlement, and building a new life in Canada. 
          Real stories, expert guidance, and community support.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 md:gap-12 justify-center">
          <a href="/blog" class="bg-yellow-400 text-blue-900 px-8 py-5 rounded-lg text-xl font-semibold hover:bg-yellow-900 transition-colors">
            Read Success Stories
          </a>
          <a href="/about" class="border-2 border-white text-white px-8 py-5 rounded-lg text-xl font-semibold hover:bg-white hover:text-blue-900 transition-colors">
            Learn About Us
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Featured Stories Section -->
  <section class="py-16 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">Featured Success Stories</h2>
        <p class="text-xl text-gray-600">Real experiences from newcomers who have built successful lives in Canada</p>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        {featuredPosts.map((post) => (
          <article class="bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow">
            <div class="p-6">
              <div class="flex items-center mb-3">
                <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium">
                  {post.data.category}
                </span>
                <span class="ml-3 text-gray-500 text-sm">
                  {new Date(post.data.pubDate).toLocaleDateString('en-CA', {
                    month: 'short',
                    day: 'numeric',
                    year: 'numeric'
                  })}
                </span>
              </div>
              <h3 class="text-xl font-semibold text-gray-900 mb-3 line-clamp-2">
                {post.data.title}
              </h3>
              <p class="text-gray-600 mb-4 line-clamp-3">
                {post.data.description}
              </p>
              <div class="flex items-center justify-between">
                <a 
                  href={`/blog/${post.slug}`}
                  class="text-blue-600 font-medium hover:text-blue-700 transition-colors"
                >
                  Read Full Story ‚Üí
                </a>
                <div class="flex items-center text-gray-500 text-sm">
                  <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                  </svg>
                  {post.data.readTime || '5'} min read
                </div>
              </div>
            </div>
          </article>
        ))}
      </div>
      
      <div class="text-center mt-8">
        <a href="/blog" class="bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors">
          View All Stories
        </a>
      </div>
    </div>
  </section>

  <!-- Quick Access Section -->
  <section class="py-16 bg-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">Quick Access</h2>
        <p class="text-xl text-gray-600">Everything you need to know about starting your Canadian journey</p>
      </div>
      
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <div class="bg-white rounded-lg shadow-lg p-8">
          <h3 class="text-2xl font-bold text-gray-900 mb-4">üìã Immigration & Settlement</h3>
          <ul class="space-y-3 text-gray-600">
            <li class="flex items-start">
              <span class="text-green-500 mr-2">‚úì</span>
              Step-by-step immigration guides
            </li>
            <li class="flex items-start">
              <span class="text-green-500 mr-2">‚úì</span>
              Settlement services and resources
            </li>
            <li class="flex items-start">
              <span class="text-green-500 mr-2">‚úì</span>
              Work permit and visa information
            </li>
            <li class="flex items-start">
              <span class="text-green-500 mr-2">‚úì</span>
              Permanent residence pathways
            </li>
          </ul>
          <a href="/blog?category=immigration" class="inline-block mt-6 bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">
            Explore Immigration Guides
          </a>
        </div>
        
        <div class="bg-white rounded-lg shadow-lg p-8">
          <h3 class="text-2xl font-bold text-gray-900 mb-4">üè† Living in Canada</h3>
          <ul class="space-y-3 text-gray-600">
            <li class="flex items-start">
              <span class="text-green-500 mr-2">‚úì</span>
              Housing and accommodation tips
            </li>
            <li class="flex items-start">
              <span class="text-green-500 mr-2">‚úì</span>
              Healthcare system guide
            </li>
            <li class="flex items-start">
              <span class="text-green-500 mr-2">‚úì</span>
              Education and schools
            </li>
            <li class="flex items-start">
              <span class="text-green-500 mr-2">‚úì</span>
              Banking and financial services
            </li>
          </ul>
          <a href="/blog?category=settlement" class="inline-block mt-6 bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors">
            Read Settlement Tips
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Recent Posts Section -->
  <section class="py-16 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">Latest Resources</h2>
        <p class="text-xl text-gray-600">Stay updated with our newest guides and success stories</p>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {recentPosts.map((post) => (
          <article class="bg-gray-50 rounded-lg p-6 hover:shadow-lg transition-shadow">
            <div class="flex items-center mb-3">
              <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm font-medium">
                {post.data.category}
              </span>
              <span class="ml-3 text-gray-500 text-sm">
                {new Date(post.data.pubDate).toLocaleDateString('en-CA', {
                  month: 'short',
                  day: 'numeric'
                })}
              </span>
            </div>
            <h3 class="text-lg font-semibold text-gray-900 mb-3 line-clamp-2">
              {post.data.title}
            </h3>
            <p class="text-gray-600 mb-4 line-clamp-2 text-sm">
              {post.data.description}
            </p>
            <a 
              href={`/blog/${post.slug}`}
              class="text-blue-600 font-medium hover:text-blue-700 transition-colors text-sm"
            >
              Read More ‚Üí
            </a>
          </article>
        ))}
      </div>
    </div>
  </section>

  <!-- Call to Action -->
  <section class="py-16 bg-gradient-to-r from-blue-600 to-indigo-700 text-white">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h2 class="text-3xl md:text-4xl font-bold mb-4">Ready to Start Your Canadian Journey?</h2>
      <p class="text-xl mb-8 text-blue-100">
        Join thousands of newcomers who have found success, community, and a new home in Canada. 
        Your story starts here.
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a href="/blog" class="bg-white text-blue-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors">
          Read Success Stories
        </a>
        <a href="/about" class="border-2 border-white text-white px-8 py-3 rounded-lg font-semibold hover:bg-white hover:text-blue-600 transition-colors">
          Learn About Us
        </a>
        <a href="/contact" class="bg-yellow-400 text-blue-900 px-8 py-3 rounded-lg font-semibold hover:bg-yellow-300 transition-colors">
          Contact Us
        </a>
      </div>
    </div>
  </section>
</BlogLayout>